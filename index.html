<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <title>{{title}}</title>
    <script>
      function open_websocket(){
      function show_message(message){
      var el = document.createElement('div');
      el.innerHTML = message;
      document.body.appendChild(el);
      }
      
      var ws = new WebSocket("ws://127.0.0.1:8888/track");
      ws.onopen = function() {
      show_message('Connected.');
      }
      ws.onmessage = function(event) {
      show_message(event.data);
      }
      ws.onclose = function() {
      show_message("Closed.");
      }
      }
      
    </script>
</head>
  
<body onload = "open_websocket()">
  <h1>{{ title }}</h1>
  <!---
  <form method="POST" action="/msg" target="_hidden">
    <input name="username" style="width: 500px;border: 1px solid #CCC;padding: 3px;" value="" placeholder="Enter your message here and press the 'Send' button."/>
    <input type="submit" value="Post"/>
    -->
  
  <form method="POST" action="/msg" target="_hidden">
    <table>
      <tr>
        <td>Username</td><td><input type="text" name="username"></td>
      </tr>
      <tr>
        <td>Password</td><td><input type="password" name="password"></td>
      </tr>
      <tr>
        <td>Password (again)</td><td><input type="password" name="password2"></td>
      </tr>
      <tr>
        <td colspan="2" align="right"><input type="submit" name="doit" value="Create an account"></td></tr>
    </table>
  </form>
  <iframe id="_hidden" style="display:none"></iframe>

</body>
</html>
